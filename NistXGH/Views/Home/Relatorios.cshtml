@{
    ViewData["Title"] = "Relat√≥rio de An√°lise Descritiva - NIST CSF";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Styles {
    <link rel="stylesheet" href="/css/pages/relatorios.css" asp-append-version="true" />
}

<div class="container">
    <h1>üìä Relat√≥rios - Cen√°rio Futuro</h1>

    <!-- CONTROLES DE TABELA E FILTRO -->
    <div class="combo-container">
        <div class="controls">
            <!-- Seletor de Tabela - AGORA DETERMINA A EDI√á√ÉO -->
            <div class="filter-group">
                <label for="filterTable">Cen√°rio para Visualiza√ß√£o/Edi√ß√£o:</label>
                <select id="filterTable" class="form-control">
                    <option value="FUTURO">Cen√°rio Futuro</option>
                    <option value="ATUAL">Cen√°rio Atual</option>
                </select>
            </div>

            <div class="filter-group">
                <label for="filterFunction">Fun√ß√£o:</label>
                <select id="filterFunction" class="form-control">
                    <option value="">Todas as fun√ß√µes</option>
                </select>
            </div>

            <div class="filter-group">
                <label for="filterPriority">Prioridade:</label>
                <select id="filterPriority" class="form-control">
                    <option value="">Todas as prioridades</option>
                </select>
            </div>

            <div class="filter-group">
                <label for="filterLevel">N√≠vel:</label>
                <select id="filterLevel" class="form-control">
                    <option value="">Todos os n√≠veis</option>
                </select>
            </div>

            <div class="filter-group">
                <button id="btnFiltrar" class="btn btn-primary">üîç Aplicar Filtros</button>
            </div>

            <div class="filter-group">
                <button id="btnExportar" class="btn btn-success">üì• Exportar Relat√≥rio</button>
            </div>
        </div>
    </div>

    <!-- CARDS DE RESUMO -->
    <div class="summary">
        <div class="summary-card">
            <h3>Total de Registros</h3>
            <div class="summary-value" id="totalRegistros">0</div>
            <div class="summary-description">Registros carregados</div>
        </div>
        <div class="summary-card">
            <h3>Subcategorias √önicas</h3>
            <div class="summary-value" id="totalSubcategorias">0</div>
            <div class="summary-description">Subcategorias distintas</div>
        </div>
        <div class="summary-card">
            <h3>N√≠vel M√©dio</h3>
            <div class="summary-value" id="nivelMedio">-</div>
            <div class="summary-description">M√©dia dos n√≠veis</div>
        </div>
        <div class="summary-card">
            <h3>Prioridade M√©dia</h3>
            <div class="summary-value" id="prioridadeMedia">-</div>
            <div class="summary-description">M√©dia das prioridades</div>
        </div>
    </div>

    <!-- DICA DE EDI√á√ÉO ATUALIZADA -->
    <div class="combo-container"
        style="background: linear-gradient(135deg, #e3f2fd, #bbdefb); border-left: 4px solid #2196f3;">
        <div style="display: flex; align-items: center; gap: 15px;">
            <div style="font-size: 2em;">üí°</div>
            <div>
                <h3 style="margin: 0 0 5px 0; color: #0d47a1;">Como editar registros</h3>
                <p style="margin: 0; color: #1565c0;">
                    <strong>Selecione o cen√°rio na combobox acima e clique em qualquer linha da tabela</strong> para
                    editar
                    o cen√°rio atualmente selecionado.
                </p>
            </div>
        </div>
    </div>

    <!-- TABELA DE DADOS - SEM COLUNA DE A√á√ïES -->
    <div class="combo-container">
        <div class="table-container">
            <table id="tabelaCenarios">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Subcategoria</th>
                        <th>Prioridade</th>
                        <th>N√≠vel</th>
                        <th>Pol√≠tica</th>
                        <th>Pr√°tica</th>
                        <th>Artefato</th>
                        <th>Fun√ß√£o Respons√°vel</th>
                        <th>Refer√™ncia</th>
                        <th>Data Registro</th>
                        <!-- REMOVIDA COLUNA DE A√á√ïES -->
                    </tr>
                </thead>
                <tbody id="tbodyCenarios">
                    <tr>
                        <td colspan="10" class="loading">Carregando dados do cen√°rio futuro...</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- RECOMENDA√á√ïES -->
    <div class="combo-container">
        <div class="recommendations">
            <h2>üí° Recomenda√ß√µes e Insights</h2>
            <div id="listaRecomendacoes">
                <div class="recommendation-item">
                    Analise os dados carregados para ver recomenda√ß√µes espec√≠ficas baseadas
                    nos cen√°rios futuros.
                </div>
            </div>
        </div>
    </div>
</div>

<script src="~/js/relatorios.js" asp-append-version="true"></script>